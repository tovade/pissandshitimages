<!DOCTYPE html>
<html>
  <head>
    <title>Admin Panel - pissandshitimages</title>
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/admin.css" />
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
  </head>
  <body>
    <script src="/oneko.js"></script>
    <h1>ğŸ› ï¸ Admin Panel - pissandshitimages</h1>

    <div class="nav-links">
      <a href="/admin/banned-ips"
        >ğŸš« View Banned IPs (<span id="banned-count">0</span>)</a
      >
      <a href="/admin/sessions">ğŸ” Active Sessions</a>
      <a href="/admin/change-password">ğŸ”‘ Change Password</a>
      <a href="/gallery">ğŸ–¼ï¸ Gallery</a>
      <a href="/admin/logout">ğŸšª Logout</a>
    </div>

    <div id="success-messages">
      <!-- Success messages will be inserted here -->
    </div>

    <div class="stats">
      <h2>ğŸ“Š Stats</h2>
      <div class="stats-grid">
        <div class="stat-box">
          <h3>ğŸ–¼ï¸ Image Counts</h3>
          <p>Total Images: <span id="total-images"></span></p>
          <p>Visible Images: <span id="visible-images"></span></p>
          <p>Hidden Images: <span id="hidden-images"></span></p>
          <p>
            Showing <span id="showing-range"></span> of
            <span id="total-count"></span>
          </p>
        </div>
        <div class="stat-box">
          <h3>ğŸ² Roll Stats</h3>
          <p>âœ¨ Lucky Survivors: <span id="lucky-survivors"></span></p>
          <p>ğŸ’© Normal Shit: <span id="normal-shit"></span></p>
          <p>ğŸ’€ Extreme Nuclear: <span id="extreme-nuclear"></span></p>
        </div>
        <div class="stat-box">
          <h3>ğŸ“¦ Storage</h3>
          <p>Total Size: <span id="total-size"></span> MB</p>
          <p>Avg Size: <span id="avg-size"></span> KB per image</p>
        </div>
        <div class="stat-box">
          <h3>ğŸš« Banned IPs</h3>
          <p>Total Banned: <span id="banned-ips-count"></span></p>
          <p>
            <a href="/admin/banned-ips" style="color: #ff6b6b"
              >Manage Banned IPs â†’</a
            >
          </p>
        </div>
      </div>

      <div
        style="
          margin-top: 20px;
          background: white;
          padding: 15px;
          border-radius: 8px;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        "
      >
        <h3 style="color: #ff6b6b; margin-top: 0">ğŸ› ï¸ Image Management by ID</h3>
        <div style="display: flex; gap: 10px; align-items: center">
          <input
            type="text"
            id="imageIdInput"
            placeholder="Paste image ID here"
            required
            style="
              flex: 1;
              padding: 10px;
              border: 2px solid #ff6b6b;
              border-radius: 5px;
            "
          />

          <form
            action="/admin/delete-by-id"
            method="post"
            style="display: inline"
          >
            <input type="hidden" name="imageId" id="deleteImageId" />
            <button
              type="submit"
              class="delete-btn"
              style="
                padding: 10px 15px;
                background: #ff4757;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
              "
              onclick="document.getElementById('deleteImageId').value = document.getElementById('imageIdInput').value; return confirm('Are you sure you want to delete this image?')"
            >
              ğŸ—‘ï¸ Delete
            </button>
          </form>

          <form
            action="/admin/toggle-visibility-by-id"
            method="post"
            style="display: inline"
          >
            <input type="hidden" name="imageId" id="toggleImageId" />
            <button
              type="submit"
              class="visibility-btn visible"
              style="
                padding: 10px 15px;
                background: #4caf50;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
              "
              onclick="document.getElementById('toggleImageId').value = document.getElementById('imageIdInput').value; return confirm('Are you sure you want to toggle the visibility of this image?')"
            >
              ğŸ‘ï¸ Toggle Visibility
            </button>
          </form>

          <form
            action="/admin/ban-ip-by-id"
            method="post"
            style="display: inline"
          >
            <input type="hidden" name="imageId" id="banImageId" />
            <button
              type="submit"
              class="ban-btn"
              style="
                padding: 10px 15px;
                background: #ff6b6b;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
              "
              onclick="document.getElementById('banImageId').value = document.getElementById('imageIdInput').value; return confirm('Are you sure you want to ban the IP associated with this image? This will prevent them from uploading any more images.')"
            >
              ğŸš« Ban IP
            </button>
          </form>
        </div>
      </div>
    </div>

    <div class="image-list">
      <h2>ğŸ–¼ï¸ Images</h2>
      <table>
        <tr>
          <th>Thumbnail</th>
          <th>ID</th>
          <th>Shitification</th>
          <th>Date</th>
          <th>IP Info</th>
          <th>Actions</th>
        </tr>
        <tbody id="images-table">
          <!-- Images will be inserted here -->
        </tbody>
      </table>

      <div class="pagination" id="pagination">
        <!-- Pagination will be inserted here -->
      </div>
    </div>

    <script src="/js/admin.js"></script>
  </body>
</html>
